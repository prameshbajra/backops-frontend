@if(nextPaginationToken === null && files.length === 0) {
<div class="flex justify-center items-center h-screen">
  <app-loader></app-loader>
</div>
} @else {
<div class="px-10 py-16">
  @for (group of groupedFiles; track group.key) {
  <h2 class="text-xl pt-8 pb-4 dark:text-gray-400">{{ group.key | date:'longDate' }}</h2>
  <div class="object-container flex justify-start items-center gap-2 flex-wrap" (click)="onObjectAreaClick($event)">
    @for (file of group.files; track $index) {
    <div class="relative group w-24 h-24 sm:w-48 sm:h-48" [ngClass]="{ 'outline outline-2 outline-blue-500 rounded-lg': file.isSelected }">
      <input type="checkbox" (click)="toggleSelection(file)" [checked]="file.isSelected"
        class="z-10 absolute top-2 left-2 w-5 h-5 sm:w-6 sm:h-6 rounded-full appearance-none border-2 border-gray-500 bg-white cursor-pointer transition-colors checked:bg-blue-500 checked:border-blue-500"
        [ngClass]="file.isSelected ? 'opacity-100' : 'opacity-60'">
      <span class="z-10 absolute top-2 left-2 w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center text-white pointer-events-none"
        [ngClass]="{ 'opacity-100': file.isSelected, 'opacity-0': !file.isSelected }">
        ‚úî
      </span>
      <img (click)="selectObject(file)" class="w-full h-full object-cover rounded-lg transition-transform" [ngClass]="{ 'scale-95': file.isSelected }"
        [src]="file.fileUrl" alt="" />
    </div>
    }
  </div>
  } @empty {
  @if(nextPaginationToken === null) {
  <div class="w-full text-center py-16 sm:py-20">
    <div class="text-gray-500 text-base sm:text-lg">
      <mat-icon class="text-3xl mb-3 text-gray-300">folder_off</mat-icon>
      <p>No files available</p>
      <p class="text-sm text-gray-400">Upload some files to get started.</p>
    </div>
  </div>
  } @else {
  <app-loader></app-loader>
  }
  }

  @if(nextPaginationToken === null && files.length > 0 && !areImagesLoading) {
  <div class="w-100 flex justify-center items-center my-20">
    <h3 class="text-gray-500 text-base sm:text-lg">Woop! That's all üòÅ</h3>
  </div>
  }

  @if(areImagesLoading) {
  <app-loader></app-loader>
  }
</div>

<app-object-fab></app-object-fab>
}


<div [@slideInOut]="slideState" class="z-20 fixed bottom-0 left-0 right-0 bg-gray-100 p-4 flex justify-center gap-4 dark:bg-gray-950">
  <button (click)="deleteSelectedFiles()" class="px-3 py-1 bg-red-500 text-white text-sm rounded flex items-center gap-1 hover:bg-red-700">
    <mat-icon>delete</mat-icon>
    <span>{{getSelectedFilesCount() > 1 ? 'Delete all': 'Delete'}}</span>
  </button>
  <button (click)="downloadSelectedFiles()" class="px-3 py-1 bg-blue-500 text-white text-sm rounded flex items-center gap-1 hover:bg-blue-700">
    <mat-icon>cloud_download</mat-icon>
    <span class="ps-2">Download ({{ getSelectedFilesCount() }})</span>
  </button>
</div>
